%%  --------------------------------------------------------------  %%
%%  -------------------- cuisine.sty package ---------------------  %%
%%               a package written by Baptiste Le Roi               %%
%%                                                                  %%
%%  Package / style modified from livrerecettes.sty of Alexis Flesh %%
%%                                                                  %%
%%         modified from cookybooky.dtx package from J. Gilg        %%
%%                                                                  %%
%%  ------- Copyright (C) 2009,2021 by Gilg, Flesj, Le Roi -------  %%
%%  gilg@acrotex.net, alexis.flesch@gmail.com, leroi.bwh@gmail.com  %%
%%                                                                  %%
%%    This work may be distributed and/or modified under the        %%
%%    conditions of the LaTeX Project Public License (LPPL),        %%
%%    either version 1.3 of this license or (at your option)        %%
%%    any later version.                                            %%
%%    The latest version of this license is in                      %%
%%                                                                  %%
%%          http://www.latex-project.org/lppl.txt                   %%
%%                                                                  %%
%%    and version 1.3 or later is part of all distributions of      %%
%%    LaTeX version 2005/12/01 or later.                            %%
%%                                                                  %%
%%  --------------------------------------------------------------  %%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cuisine}
\RequirePackage{xkeyval}
\RequirePackage{marvosym}
%\RequirePackage{showframe}

% Geometry of the book
\RequirePackage[paperheight=29.7cm,paperwidth=21cm,margin=2cm,heightrounded]{geometry}%showframe

%glossary of the recipes
\RequirePackage{imakeidx}

% Links in the book
\RequirePackage[hidelinks,colorlinks=false]{hyperref}

% Colors
\RequirePackage{xcolor} % Required for specifying colors by name
\definecolor{ocre}{RGB}{164,16,52}  %{243,102,25} % Define the red color used for highlighting throughout the book

% Headers
\RequirePackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{\normalsize\bfseries\ #1}{}} % Chapter text font settings
\fancyhf{} \renewcommand{\headrulewidth}{0pt}
\fancyfoot[LE]{\bfseries\thepage} % Font setting for the page number in the foot
\fancyfoot[RO]{\huge\bfseries\textcolor{white}{ \rightmark}} %% Font setting for the page number in the foot
% remove the page number on chapter pages
\makeatletter
\let\ps@plain\ps@empty
\makeatother


% Pictures and graphic content
\RequirePackage{graphicx} % Required for including pictures
\graphicspath{{Pictures/}} % Specifies the directory where pictures are stored
\RequirePackage{wrapfig} % To wrap the tabular with the ingredients
\RequirePackage{floatrow}
\RequirePackage{tikz} % Required for drawing custom shapes
\RequirePackage{eso-pic} % for background pictures
\RequirePackage{transparent} % for transparency

% Fonts
\RequirePackage{lettrine}
\RequirePackage{polyglossia}
\setdefaultlanguage{french}
\RequirePackage[defaultfam,tabular,lining,alternates]{montserrat} %% Option 'defaultfam'
%% only if the base font of the document is to be sans serif
\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}

% the name of the TOC
\addto\captionsfrench{% Replace "english" with the language you use
  \renewcommand{\contentsname}%
    {Au menu}%
}

% lists
\RequirePackage{enumitem}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                       Elements of the recipe                                                  %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%Counter of recipe
%\newcounter{numrecette}\setcounter{numrecette}{0}

\RequirePackage[compact]{titlesec}
\titleformat{\section}
        {\color{ocre}\normalfont\Huge\bfseries\filcenter}
       {\color{ocre}\thesection}{1em}{}
\renewcommand{\thesection}{}

% Name of the recipe
\newcommand*{\recette}[1]
    {
        \newpage 
        \section{#1}
        \index{#1}}
%\addcontentsline{toc}{section}{#1}}
%%        \stepcounter{numrecette}
        {%
%        \textcolor{ocre}{{\Huge \textbf{#1\hfill}}} 
%        }
    
%    \vspace{1em}    
    

% Icons and text
\newcommand{\preptime}[1]{\includegraphics[height=15pt]{icons/chef.png}{\raisebox{3pt}{ #1\hspace{1em}}}}
\newcommand{\cooktime}[1]{\includegraphics[height=15pt]{icons/pot.png}{\raisebox{3pt}{ #1\hspace{1em}}}}
\newcommand{\baketime}[1]{\includegraphics[height=15pt]{icons/oven.png}{\raisebox{3pt}{ #1\hspace{1em}}}}
\newcommand{\people}[1]{\includegraphics[height=15pt]{icons/plate.png}{\raisebox{3pt}{ #1\hspace{1em}}}}
\newcommand{\cooltime}[1]{\includegraphics[height=15pt]{icons/fridge.png}{\raisebox{3pt}{ #1\hspace{1em}}}}
\newcommand{\robot}[1]{\includegraphics[height=15pt]{icons/robot.png}{\raisebox{3pt}{ #1\hspace{1em}}}}

% icon from https://www.flaticon.com/fr/auteurs/those-icons


% Ingredients
\RequirePackage{wrapfig}                     % To wrap the tabular with the ingredients
\RequirePackage{units}
\RequirePackage{tabulary}                    % line breaks in tabular

\newcommand{\recipe}[2]{
    \vspace{3em}\noindent
    \begin{minipage}[t]{0.33\paperwidth}
        \textbf{Ainekset}
        \\[1em]
        \begin{tabulary}{0.33\paperwidth}{rL}
                #1
        \end{tabulary}
    \end{minipage}
    \begin{minipage}[t]{0.67\textwidth}
        \textbf{Resepti}
        \begin{enumerate}[label=\color{ocre}\theenumi, font=\bfseries]
            #2 
        \end{enumerate}
    \end{minipage}
}


% The photo of the recipe
\newcommand{\photo}[1]{
    \newpage
    \vfill{ \transparent{0} :)}
    \AddToShipoutPictureBG*{\includegraphics[width=\paperwidth,height=\paperheight]{#1}}
}

\newcommand*{\info}[1]
    {\vfill
        \begin{tikzpicture}[overlay]
            \draw[line width=1.5pt,color=ocre] (-.2,0) -- (3,0);
            \draw[line width=1.5pt,color=ocre] (0,.2) -- (0,-1);
            %\draw[color=red] (0.2,-.5) node[right] {\Large Astuce :};
        \end{tikzpicture}
        
        \vspace{1em}
        \hspace{1em}\begin{minipage}{.915\textwidth}%
            \itshape#1
        \end{minipage}
    }

\newcommand*{\recipebody}[1]
{\vspace{30pt}
  \begin{flushleft}
    #1
    \end{flushleft}
}

\endinput
